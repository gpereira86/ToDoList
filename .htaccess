# Desativa a listagem de diretórios
Options -Indexes

# Habilita o mecanismo de reescrita
RewriteEngine On

# Define a base para reescritas de URL
RewriteBase /

# Verifica se a solicitação está dentro do diretório raiz ou das subpastas do projeto
RewriteCond %{REQUEST_URI} !^/
RewriteRule ^ - [R=404,L]

# Verifica se a solicitação é para um arquivo ou diretório existente
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-l

# Redireciona todas as outras solicitações para index.php com a URL solicitada como parâmetro
RewriteRule ^(.*)$ index.php/$1 [L]

# Em cache para sempre (scripts e folhas de estilo)
# <FilesMatch "\.(js|css)$">
# Header set Cache-Control "public"
# Header set Expires "Thu, 15 Apr 2010 20:00:00 GMT"
# Header unset Last-Modified
# </FilesMatch>

<IfModule mod_headers.c>
    <FilesMatch "\.(css|js)$">
          Header set Cache-Control "max-age=300"
    </FilesMatch>
</IfModule>


# Habilita a compressão gzip para melhorar o tempo de carregamento
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# Habilita Keep-Alive para conexões persistentes
<IfModule mod_headers.c>
    Header set Connection keep-alive
</IfModule>

# Configura cabeçalhos de segurança adicionais
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
</IfModule>